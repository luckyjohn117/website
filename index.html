<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="styles1.css" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <div class="page">
      <body>
        <div class="name-wrap">
          <canvas
            id="pixName"
            width="650"
            height="190"
            aria-hidden="true"
          ></canvas>
          <span class="sr-only">Max Daly</span>
        </div>

        <div>
          <p class="logline">COPYWRITER / OLYMPIC GOLD MEDALIST / LIAR</p>
          <p class="bio">
            Looking for a fit, sporty, fun-to-be-around can of ham who writes
            like crazy? Look no further! Seriously! Don't look at anyone else!
            Please! Why would you? Waste of time I bet. You can just contact me,
            close your laptop, and get lunch.
          </p>
        </div>
        <div class="projectswrapper">
          <p class="projectsheader">PAST WORK:</p>
          <!-- Links to open mailer windows -->
          <p class="project">
            <a href="#" onclick="return openMailer('win1', this);">
              <img class="mail-icon" src="images/Letter.ico" alt="" />
              subj: BETTER THAN LABUBU
            </a>
          </p>
          <div id="win1" class="window">
            <div class="titlebar">
              <span>MaxMail.net</span>
              <button onclick="closeWindow('win1')"><span>×</span></button>
            </div>
            <div class="content">
              <img src="images/BETTER THAN LABUBU cropped.jpeg" alt="mailer" />
            </div>
          </div>

          <p class="project">
            <a href="#" onclick="return openMailer('win2', this);">
              <img class="mail-icon" src="images/Letter.ico" alt="" />
              subj: BUY GOLD
            </a>
          </p>
          <div id="win2" class="window">
            <div class="titlebar">
              <span>Mailer 2</span>
              <button onclick="closeWindow('win2')"><span>×</span></button>
            </div>
            <div class="content">
              <img src="images/BUY GOLD cropped.jpeg" alt="mailer" />
            </div>
          </div>

          <p class="project">
            <a href="#" onclick="return openMailer('win3', this);">
              <img class="mail-icon" src="images/Letter.ico" alt="" />
              subj: FOR THE IRON DEFICIENT GIRLIES
            </a>
          </p>
          <div id="win3" class="window">
            <div class="titlebar">
              <span>Mailer 3</span>
              <button onclick="closeWindow('win3')"><span>×</span></button>
            </div>
            <div class="content">
              <img
                src="images/FOR THE IRON DEFICIENT GIRLIES cropped.jpeg"
                alt="mailer"
              />
            </div>
          </div>

          <p class="project">
            <a href="#" onclick="return openMailer('win4', this);">
              <img class="mail-icon" src="images/Letter.ico" alt="" />
              subj: ARE YOU AFRAID OF THE DARK
            </a>
          </p>
          <div id="win4" class="window">
            <div class="titlebar">
              <span>Mailer 3</span>
              <button onclick="closeWindow('win4')"><span>×</span></button>
            </div>
            <div class="content">
              <img
                src="images/WHO'S AFRAID OF THE DARK cropped.jpeg"
                alt="mailer"
              />
            </div>
          </div>

          <p class="project">
            <a href="#" onclick="return openMailer('win5', this);">
              <img class="mail-icon" src="images/Letter.ico" alt="" />
              subj: KNICKS IN 7
            </a>
          </p>
          <div id="win5" class="window">
            <div class="titlebar">
              <span>Mailer 3</span>
              <button onclick="closeWindow('win5')"><span>×</span></button>
            </div>
            <div class="content">
              <img src="images/KNICKS IN 7 cropped.jpeg" alt="mailer" />
            </div>
          </div>

          <p class="project">
            <a href="#" onclick="return openMailer('win6', this);">
              <img class="mail-icon" src="images/Letter.ico" alt="" />
              subj: WE HAVE GAY STUFF
            </a>
          </p>
          <div id="win6" class="window">
            <div class="titlebar">
              <span>Mailer 3</span>
              <button onclick="closeWindow('win6')"><span>×</span></button>
            </div>
            <div class="content">
              <img src="images/WE HAVE GAY STUFF cropped.jpeg" alt="mailer" />
            </div>
          </div>

          <div class="icon-row">
            <a class="icon" href="mailto:maxkdaly@gmail.com">
              <img src="images/Mailbox with phone.ico" alt="Email icon" />
              <span class="icon-label">EMAIL</span>
            </a>
            <button class="icon" type="button" onclick="openWindow('bioWin')">
              <img src="images/Earth (4 colors).ico" alt="Bio icon" />
              <span class="icon-label">BIO</span>
            </button>
            <button
              class="icon resume-icon"
              type="button"
              onclick="openWindow('resumeWin')"
            >
              <img
                src="images/Writing on list with figures.ico"
                alt="Resume icon"
              />
              <span class="icon-label">RESUME</span>
            </button>
          </div>
        </div>

        <!-- Mailer windows -->
        <div id="win1" class="window">
          <div class="titlebar">
            <span>MaxMail.net</span>
            <button onclick="closeWindow('win1')"><span>×</span></button>
          </div>
          <div class="content">
            <img src="images/BETTER THAN LABUBU cropped.jpeg" alt="mailer" />
          </div>
        </div>

        <div id="win2" class="window">
          <div class="titlebar">
            <span>Mailer 2</span>
            <button onclick="closeWindow('win2')"><span>×</span></button>
          </div>
          <div class="content">
            <img src="images/BUY GOLD cropped.jpeg" />
          </div>
        </div>

        <div id="win3" class="window">
          <div class="titlebar">
            <span>Mailer 3</span>
            <button onclick="closeWindow('win3')"><span>×</span></button>
          </div>
          <div class="content">
            <img src="images/FOR THE IRON DEFICIENT GIRLIES cropped.jpeg" />
          </div>
        </div>
        <div id="win4" class="window">
          <div class="titlebar">
            <span>Mailer 3</span>
            <button onclick="closeWindow('win4')"><span>×</span></button>
          </div>
          <div class="content">
            <img src="images/WHO'S AFRAID OF THE DARK cropped.jpeg" />
          </div>
        </div>
        <div id="win5" class="window">
          <div class="titlebar">
            <span>Mailer 3</span>
            <button onclick="closeWindow('win5')"><span>×</span></button>
          </div>
          <div class="content">
            <img src="images/KNICKS IN 7 cropped.jpeg" />
          </div>
        </div>
        <div id="win6" class="window">
          <div class="titlebar">
            <span>Mailer 3</span>
            <button onclick="closeWindow('win6')"><span>×</span></button>
          </div>
          <div class="content">
            <img src="images/WE HAVE GAY STUFF cropped.jpeg" />
          </div>
        </div>
        <div id="bioWin" class="window">
          <div class="titlebar">
            <span>Bio</span>
            <button onclick="closeWindow('bioWin')"><span>×</span></button>
          </div>
          <div class="content">
            <div class="window-body">
              <p class="bio-body">
                Looking for a fit, sporty, fun-to-be-around can of ham who
                writes like crazy? Look no further! Seriously! Don't look at
                anyone else! Please! Why would you? Waste of time I bet. You can
                just email me, close your laptop, and go do literally anything
                you want!
              </p>
            </div>
          </div>
        </div>
        <div id="resumeWin" class="window">
          <div class="titlebar">
            <span>Resume</span>
            <button onclick="closeWindow('resumeWin')"><span>×</span></button>
          </div>
          <div class="content">
            <div class="window-body resume-body">
              <img
                src="images/Max Daly_resume.png"
                alt="Resume"
                class="resume-image"
              />
              <p class="resume-link">
                <a
                  href="images/Max Daly_resume.pdf"
                  target="_blank"
                  rel="noopener"
                  >Open full resume</a
                >
              </p>
            </div>
          </div>
        </div>

        <!-- Script -->
        <script>
          let topZ = 1000;
          let currentWin = null;
          let activeWin = null;
          let offsetX = 0,
            offsetY = 0;

          function openWindow(id) {
            const win = document.getElementById(id);
            win.style.display = "flex";
            bringToFront(win);
          }

          function closeWindow(id) {
            const win = document.getElementById(id);
            win.style.display = "none";
            if (activeWin === win) {
              setActiveWindow(null);
              const next = getTopVisibleWindow();
              if (next) bringToFront(next);
            }
          }

          function bringToFront(elem) {
            topZ++;
            elem.style.zIndex = topZ;
            setActiveWindow(elem);
          }

          function setActiveWindow(win) {
            activeWin = win;
            document.querySelectorAll(".window").forEach((w) => {
              w.classList.toggle("active-window", w === win);
            });
          }

          function getTopVisibleWindow() {
            const visible = Array.from(
              document.querySelectorAll(".window")
            ).filter((w) => w.style.display !== "none");
            return visible.sort(
              (a, b) =>
                parseInt(b.style.zIndex || 0) - parseInt(a.style.zIndex || 0)
            )[0];
          }

          function openMailer(id, linkEl) {
            openWindow(id);
            const icon = linkEl.querySelector(".mail-icon");
            if (icon && !icon.dataset.opened) {
              icon.dataset.opened = "true";
              icon.src = "images/White letter (opened).ico";
            }
            return false; // prevent jump
          }

          // dragging for all windows
          const windows = document.querySelectorAll(".window");

          windows.forEach((win) => {
            const bar = win.querySelector(".titlebar");

            win.addEventListener("mousedown", () => bringToFront(win));

            bar.addEventListener("mousedown", function (e) {
              currentWin = win;
              bringToFront(win);
              offsetX = e.clientX - win.offsetLeft;
              offsetY = e.clientY - win.offsetTop;
              document.addEventListener("mousemove", dragMove);
              document.addEventListener("mouseup", dragStop);
            });
          });

          function dragMove(e) {
            if (!currentWin) return;
            currentWin.style.left = e.clientX - offsetX + "px";
            currentWin.style.top = e.clientY - offsetY + "px";
          }

          function dragStop() {
            currentWin = null;
            document.removeEventListener("mousemove", dragMove);
            document.removeEventListener("mouseup", dragStop);
          }

          // existing script...

          function drawPixelName() {
            const c = document.getElementById("pixName");
            if (!c) return;
            const ctx = c.getContext("2d");
            ctx.clearRect(0, 0, c.width, c.height);
            ctx.imageSmoothingEnabled = false;
            ctx.fillStyle = "rgb(45,45,45)";
            ctx.font = "120px 'Times New Roman'";
            ctx.textBaseline = "top";
            ctx.fillText("Max Daly", 4, 4);
          }
          drawPixelName();
          window.onload = function () {
            openWindow("win3");
            openWindow("win1");
          };
        </script>
      </body>
    </div>
  </body>
</html>
